Post Title: How to make LLM output deterministic?
Author: Vishwaraj13
Score: 4
URL: https://www.reddit.com/r/LangChain/comments/1plbbmu/how_to_make_llm_output_deterministic/
Number of comments: 32
Created UTC: 1765596130.0

Post Content:
I am working on a use case where i need to extract some entities from user query and previous user chat history and generate a structured json response from it. The problem i am facing is sometimes it is able to extract the perfect response and sometimes it fails in few entity extraction for the same input ans same prompt due to the probabilistic nature of LLM. I have already tried setting temperature to 0 and setting a seed value to try having a deterministic output.

Have you guys faced similar problems or have some insights on this? It will be really helpful.

Also does setting seed value really work. In my case it seems it didn't improve anything.

I am using Azure OpenAI GPT 4.1 base model using pydantic parser to get accurate structured response. Only problem the value for that is captured properly in most runs but for few runs it fails to extract right value


Top 5 comments:

Comment 1:
Author: A2spades
Score: 12
Created UTC: 1765612868.0
Comment: Not use llm, use something that produces deterministic result.

Comment 2:
Author: johndoerayme1
Score: 11
Created UTC: 1765600321.0
Comment: If you're not worried about overhead you can triangulate. Use an orchestrator and sub agents. Send multiple sub agents out to create your structured json. Let the orchestrator compare the results and either use the best output or a combination of the best parts of all of them. 

Having a second LLM check the work of the first LLM has been shown to at least increase accuracy.

We recently did something similar for content categorization from a taxonomy. We let the first node guess keywords and themes. The second node does semantic search on the taxonomy based on those and gets candidates. The third node evaluates the candidates against the same content. In testing we found that approach to be considerably more accurate than just letting a single node do all the work. 

Not sure if 100% is something you can really shoot for but I think you know that eh?

Comment 3:
Author: anotherleftistbot
Score: 10
Created UTC: 1765597000.0
Comment: The best approach I've seen on making agents reliable is from this guy:

[https://github.com/humanlayer/12-factor-agents?tab=readme-ov-file](https://github.com/humanlayer/12-factor-agents?tab=readme-ov-file)

He gave a solid talk at AI Engineering Conference on the subject here:

[https://www.youtube.com/watch?v=8kMaTybvDUw](https://www.youtube.com/watch?v=8kMaTybvDUw)

Basically it is still just software engineering but with a new, very powerful tool baked in (LLMs).

There are a number of patterns you can use to have more success.

Watch the talk, read the github.

Let me know if you found it useful.

Comment 4:
Author: slower-is-faster
Score: 6
Created UTC: 1765596343.0
Comment: You canâ€™t.

Comment 5:
Author: minisoo
Score: 3
Created UTC: 1765614602.0
Comment: Just use the good old rule based approach if you need to be deterministic. And then throw the outputs as prompts to some fanciful llm based UI to pretend that it is llm level intelligence.