Post Title: Little Help Required with KeepAlived config for AdguardHome Redundancy 
Author: aarshmajmudar
Score: 0
URL: https://www.reddit.com/r/selfhosted/comments/1e9yvh0/little_help_required_with_keepalived_config_for/
Number of comments: 21
Created UTC: 2024-07-23 04:25:25

Post Content:
I wanna use Keepalived to ensure that when my AdguardHome (AGH1) Docker container which is on Docker Macvlan with IP 192.168.1.128 is not available when pinged, it should switch over to AdguardHome(AGH2) Docker container which is on Docker Macvlan with IP 192.168.1.130. From inside the container the Interface shows enp0 for both

Adguard Home(AGH1) with IP [192.168.1.128](http://192.168.1.128) is on Host [192.168.1.2](http://192.168.1.2) (interface br0)  
Adguard Home(AGH2) with IP [192.168.1.130](http://192.168.1.130) is on Host [192.168.1.3](http://192.168.1.3) (interface br0)

I am a noob at keepalived. So I am able to figureout how to switch keepalived Virtual IP when host [192.168.1.2](http://192.168.1.2) goes down to a backup, but I want it in a way that not only host but even when only the container [192.168.1.128](http://192.168.1.128) is not reachable, it should switch over to backup.

Top 2 comments:
Comment 1:
  Author: thekrautboy
  Comment: Create a Virtual IP in keepalived, make the container listen on that IP, repeat on the other host, done.

You may need to get rid of your macvlan setup.
  Score: 1
  Created UTC: 2024-07-23 04:30:00

Comment 2:
  Author: NiftyLogic
  Comment: Maybe I don't understand the issue properly, but why don't you just distribute the two DNS IPs via DHCP?

The clients should be clever enough to do a failover if their primary instance is down.
  Score: 0
  Created UTC: 2024-07-23 11:37:35

Note: This post has only 2 comments at the time of scraping.
