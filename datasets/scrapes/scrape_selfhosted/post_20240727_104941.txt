Post Title: Noob question about ISP measuring homelab LAN traffic
Author: kmnair
Score: 2
URL: https://www.reddit.com/r/selfhosted/comments/1e4air8/noob_question_about_isp_measuring_homelab_lan/
Number of comments: 9
Created UTC: 2024-07-16 00:09:22

Post Content:
So I recently began self hosting and got jellyfin up and running. I have traefik set up for reverse proxy. I wanted to set up https and use letsencrypt with traefik. I registered a domain and created an A record pointing to the local LAN address of my server on my domain, so that my-domain.com points to the local IP of my traefik instance. I also created CNAME records for the subdomains I am using for different services. eg media.my-domain.com 

I have everything working now the way I expected it to. Https works and certificates get generated by traefik, and jellyfin and other services loads, but I started seeing my data usage with my ISP jump up significantly over the past couple months. If I request content using this domain address, does the data streamed by jellyfin count towards my datacap even though everything should be streaming entirely over my LAN?

Top 5 comments:
Comment 1:
  Author: MrDaGree
  Comment: I wouldn't set external dns providers to local addresses as then anyone can query/discover what you're hosting locally and I like privacy....

As far as your "seeing my data usage with my ISP jump up significantly", if your DNS records are set to local LAN addresses like you say they are, everything should be going over your LAN. Now if you like to keep up to date Linux ISOs.... that could be where things are coming.
  Score: 3
  Created UTC: 2024-07-16 00:22:59

Comment 2:
  Author: gryd3
  Comment: Do you have split DNS so that your records resolve to local IPs while you are inside the house and public IPs while you are outside the house? 

Do you have rules setup in your router to redirect traffic destined for your WAN IP address back to your internal IP address for that particular service?

Have you attempted to carry out a packet capture or some other measurement to answer this yourself?

  
If your traffic leaves your router and hits the ISP, then it's going to be counted.  Find a way to watch your packet/byte counters for your WAN interface.  Use this information to make adjustments (if required).  
Please please please don't needlessly expose services/ports to the internet unless required and protected.  It's safe to assume that most self-hosting services don't need to be exposed and a VPN will suffice to provide you with your own access.  An exposed proxy simply for handling certificates may be required depending on how you intend to renew your certs, or exposed ports/services may be required for 'others' to access your stuff.
  Score: 1
  Created UTC: 2024-07-16 00:28:42

Comment 3:
  Author: GrumpyCat79
  Comment: I have heard about ISP counting routed packets on the LAN side in their "bandwith" or data cap. I don't if the one in my country that once did that still does it, but it's one of the many reasons why I will never use my ISP provided modem as my main router...
  Score: 1
  Created UTC: 2024-07-16 04:42:23

Comment 4:
  Author: Beelance
  Comment: Whatever data your application streams, downloads, and/or caches will be counted as “download” traffic.

Beyond that, if you are referring to streaming remotely (over the internet), that is using the ISP’s internet connection to leave your network, and would be counted as “upload” traffic.

How else would the video reach your app?
  Score: 0
  Created UTC: 2024-07-16 00:33:47

Comment 5:
  Author: ciprian-n
  Comment: As long as you use a domain name with your external ip address traffic is not LAN anymore! So yes it counts as WAN traffic against your cap.
  Score: 0
  Created UTC: 2024-07-16 14:10:42

Note: This post has only 5 comments at the time of scraping.
